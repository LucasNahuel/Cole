@using Cole.Models
@model Cole.Models.Profesor


@{
    Layout = "~/Views/Administrador/_LayoutAdministrador.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Editar</title>
</head>
<body>

    <div class="mdl-grid col-md-12">
        <div class="mdl-layout-spacer">

            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()

                <figure class="front">
                    <div class="mdl-card-wide mdl-shadow--6dp">
                        <div class="mdl-card__title mdl-color--primary mdl-color-text--white relative">
                            <h2 class="mdl-card__title-text">Editar Profesor</h2>
                        </div>

                        <div class="mdl-card__supporting-text" style="display:table-cell">


                            <div class="mdl-grid col-md-12">


                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="nombre" style="padding-right:10px">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.Nombre, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.Nombre">
                                            Nombre
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.Nombre, "", new { @id = "errorNombre" })
                                        </span>
                                    </div>
                                </div>

                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="padding-right:10px" id="apellido">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.Apellido, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.Apellido">
                                            Apellido
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.Apellido, "", new { @id = "errorApellido" })
                                        </span>
                                    </div>
                                </div>

                            </div>

                            <div class="mdl-grid col-md-12">


                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="cuil" style="padding-right:10px">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.Cuil, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.Cuil">
                                            C.U.I.L.
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.Cuil, "", new { @id = "errorCuil" })
                                        </span>
                                    </div>
                                </div>

                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="padding-right:10px" id="celu">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.TelCelular, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.TelCelular">
                                            Teléfono Celular
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.TelCelular, "", new { @id = "errorCelu" })
                                        </span>
                                    </div>
                                </div>

                            </div>
                            <div class="mdl-grid col-md-12">


                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="tel" style="padding-right:10px">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.TelFijo, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.TelFijo">
                                            Teléfono fijo
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.TelFijo, "", new { @id = "errorTel" })
                                        </span>
                                    </div>
                                </div>

                                <div class="col-md-10">
                                    <div class="mdc-select" style="height:47px; width:300px">
                                        <i class="mdc-select__dropdown-icon"></i>
                                        <select id="Persona_Sexo" class="mdc-select__native-control" name="Persona.Sexo">
                                            <option value="h">Hombre</option>
                                            <option value="m">Mujer</option>
                                        </select>
                                        <label for="Persona_Sexo" class="mdc-floating-label">Sexo</label>
                                        <div class="mdc-line-ripple"></div>
                                    </div>
                                </div>

                            </div>

                            <div class="mdl-grid col-md-12">



                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="padding-right:10px" id="domicilio">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.Domicilio, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.Domicilio">
                                            Domicilio
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.Domicilio, "", new { @id = "errorDomicilio" })
                                        </span>
                                    </div>
                                </div>

                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="nacionalidad" style="padding-right:10px">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.Nacionalidad, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.Nacionalidad">
                                            Nacionalidad
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.Nacionalidad, "", new { @id = "errorNacionalidad" })
                                        </span>
                                    </div>
                                </div>

                            </div>



                            <div class="mdl-grid col-md-12">




                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty" id="fechaNacimiento">
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.FechaNacimiento, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.FechaNacimiento">
                                            Fecha de Nacimiento
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.FechaNacimiento, "", new { @id = "errorFechaNacimiento" })
                                        </span>
                                    </div>
                                </div>

                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="padding-right:10px ; display:none" id="dni">

                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Persona.Dni, new { htmlAttributes = new { @class = "mdl-textfield__input" } })
                                        <label class="mdl-textfield__label" for="Persona.Dni">
                                            D.N.I.
                                        </label>
                                        <span class="mdl-textfield__error">
                                            @Html.ValidationMessageFor(model => model.Persona.Dni, "", new { @id = "errorDni" })
                                        </span>
                                    </div>
                                </div>



                            </div>


                            <div class="mdl-grid col-md-12">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                    <input class="mdl-textfield__input" id="texto" type="text" onkeydown="if (event.keyCode == 13) {add.click(); return false;}" />
                                    <label class="mdl-textfield__label">
                                        Nombre del tìtulo
                                    </label>
                                </div>

                                <button class="mdl-button mdl-js-button mdl-button--icon" type="button" value="add" style="margin-top:14px" id="add">
                                    <i class="material-icons">add</i>
                                </button>
                            </div>

                            <link href="~/Content/mdc.chips.css" rel="stylesheet" />
                            <script src="~/Content/mdc.chips.js"></script>

                            <script>
                                function eliminarChip() {
                                        document.querySelectorAll("input.asco").forEach(function (item, index) {
                                            
                                                item.id = "Titulo_" + (index) + "__Nombre";
                                                item.name = "Titulo[" + (index) + "].Nombre";

                                        });

                                    }
                            </script>

                            <div class="mdc-chip-set" id="titulos" style="max-width:500px">
                                @{
                                    int contador = 0;
                                    foreach (Titulo t in Model.Titulo)
                                    {
                                        <div class="mdc-chip">
                                            @t.Nombre
                                            <div class="material-icons mdc-chip__icon mdc-chip__icon--trailing" onclick="
                                                  this.parentElement.remove(); eliminarChip();
                                                     ">
                                                close
                                            </div>
                                            <input class="asco" id="Titulo_@contador.ToString()__Nombre" name="Titulo[@contador.ToString()].Nombre" value="@t.Nombre" hidden/>
                                        </div>

                                        contador++;
                                    }
                                }
                            </div>



                            <script>

                                var tit = document.getElementById("titulos");

                                tit = new mdc.chips.MDCChipSet(tit);


                                var add = document.getElementById("add");
                                var texto = document.getElementById("texto");

                                add.onclick = function () {
                                    var chip = document.createElement("div");
                                    chip.textContent = texto.value; chip.classList.add("mdc-chip");

                                    texto.value = "";

                                    var closeChip = document.createElement("div");

                                    var t = document.createTextNode("close");

                                    closeChip.appendChild(t);

                                    closeChip.classList.add("material-icons");
                                    closeChip.classList.add("mdc-chip__icon");
                                    closeChip.classList.add("mdc-chip__icon--trailing");
                                    
                                    var input = document.createElement("input");
                                    input.type = "hidden";
                                    input.value = chip.textContent;
                                    input.id = "Titulo_" + (tit.root_.childElementCount) + "__Nombre";
                                    input.name = "Titulo[" + (tit.root_.childElementCount) + "].Nombre";
                                    input.classList.add("asco");



                                    closeChip.onclick = function () { this.parentElement.remove(); eliminarChip() };

                                    

                                    chip.appendChild(closeChip);
                                    chip.appendChild(input);
                                    tit.root_.appendChild(chip);
                                    tit.addChip(chip);
                                }
                            </script>




                            <br />


                            <div class="mdl-card__actions mdl-card--border">
                                <div class="mdl-grid">
                                    <input type="submit" value="Guardar" class="mdl-cell mdl-cell--12-col mdl-button mdl-button--raised mdl-button--colored mdl-js-button mdl-js-ripple-effect mdl-color-text--white" />
                                </div>
                            </div>
                        </div>


                        </div>
                    </figure>
            }
        </div>
    </div>

    <script src="~/Content/window-date-picker.js"></script>
    <script src="~/Content/InstanciadorDatepicker.js"></script>
    <script>
        var f = document.getElementById("Persona_FechaNacimiento");

        f.value = '@Model.Persona.FechaNacimiento.Value.ToShortDateString()';
        f.parentElement.parentElement.classList.add('is-dirty');
    </script>

    <script src="~/Content/ValidacionesCrearProfesor.js"></script>

</body>
</html>
